3. NUEVO TAB: â€œEDICIÃ“N DE FOTOSâ€ EN MÃ“DULO DE PROPIEDAD

ğŸ‘‰ AcciÃ³n (frontend):

En el panel de ediciÃ³n de unidad/properties, agregar un nuevo tab:

Tabs de la unidad:

â€œInformaciÃ³n generalâ€

â€œPrecios y condicionesâ€

â€œDocumentosâ€

â€œFotosâ€ âœ… (nuevo)

3.1. Dentro del tab â€œFotosâ€

Dividir en dos secciones grandes:

A) SecciÃ³n â€œFotos principales (mÃ¡x 5)â€

Mostrar:

Grid de hasta 5 tarjetas:

Miniatura

NÃºmero de orden (1â€“5)

Iconos:

âœï¸ Editar (abrir modal con la foto individual: ver, borrar, cambiar orden, marcar como portada).

ğŸ—‘ Borrar individual.

Contador: 3 / 5 fotos.

Acciones:

BotÃ³n â€œSubir fotos principalesâ€:

Input drag & drop.

Validar que el total no pase de 5.

BotÃ³n â€œEliminar TODAS las fotos principalesâ€:

Mostrar modal de confirmaciÃ³n:

â€œÂ¿Seguro que quieres eliminar todas las fotos principales de esta unidad?
Esta acciÃ³n no se puede deshacer.â€

Si confirma â†’ backend borra todas las Photo con type='primary' para esa unitId.

B) SecciÃ³n â€œFotos secundarias (mÃ¡x 20)â€

Igual estructura que la de principales:

Grid con miniaturas.

BotÃ³n â€œSubir fotos secundariasâ€.

BotÃ³n â€œEliminar TODAS las fotos secundariasâ€ con confirmaciÃ³n.

Acciones individuales por foto (editar, borrar, reordenar).

3.2. EdiciÃ³n individual de foto

ğŸ‘‰ AcciÃ³n (frontend + backend):

Al hacer clic en â€œEditarâ€ (âœï¸) en una foto:

Modal con:

Vista ampliada de la foto.

Campos:

type (primary/secondary â†’ opcional cambiar, pero respetar lÃ­mites de cupos).

position (orden).

Texto alternativo / descripciÃ³n corta (opcional).

Botones:

Guardar cambios

Eliminar foto

4. EDICIÃ“N BULK DE FOTOS (LO QUE YA TIENEN + MEJORAS)

ğŸ‘‰ AcciÃ³n (frontend + backend):

Agregar dentro del mÃ³dulo de propiedades (quizÃ¡s en un submenÃº del admin HomesApp / admin agencia):

MenÃº: â€œEdiciÃ³n masiva de fotosâ€ o â€œFotos (Bulk)â€.

Vista:

Tabla de unidades:

Unidad

Condominio / desarrollo

Zona

Fotos principales / # mÃ¡ximas
Fotos secundarias / # mÃ¡ximas

Estado de migraciÃ³n de fotos (low_res, high_res, mixed).

Botones:

â€œAbrir ediciÃ³n de fotosâ€ â†’ lleva al tab â€œFotosâ€ de esa unidad.

â€œReimportar desde Driveâ€ (si la unidad tiene driveFileIds asociados) â†’ encola la unidad para migraciÃ³n.

5. LÃ“GICA DE BORRADO MASIVO (BACKEND)

ğŸ‘‰ AcciÃ³n (backend):

Crear endpoints:

DELETE /api/units/:unitId/photos/primary

Borra todas las fotos con type='primary' de esa unidad.

DELETE /api/units/:unitId/photos/secondary

Borra todas las fotos con type='secondary'.

DELETE /api/photos/:photoId

Borra una foto individual.

Importante:

Borrar tanto la fila en DB como el archivo en el storage.

Manejar permisos segÃºn rol:

Admin HomesApp, Admin Agencia â†’ pueden borrar todas.

Agente â†’ segÃºn permisos de ediciÃ³n de unidad.

6. ROLES Y ACCESO AL TAB DE FOTOS

ğŸ‘‰ AcciÃ³n (autorizaciÃ³n):

Admin HomesApp:

Puede editar fotos de todas las unidades.

Puede ver y usar la ediciÃ³n bulk global.

Admin Agencia:

Puede editar fotos de unidades de su agencia.

Puede usar ediciÃ³n bulk pero solo con sus unidades.

Asesor / Agente:

Puede editar fotos de unidades a su cargo (segÃºn reglas de permisos que ya tengan para propiedades).

Propietario / Inquilino:

Por ahora, no acceso al tab de fotos en panel interno.

(En el futuro si quieren, se puede permitir al propietario sugerir fotos nuevas).